function typeOf(a){var s=typeof a;if(s==='object'){if(a){if(typeof a.length==='number'&&!(a.propertyIsEnumerable('length'))&&typeof a.splice==='function'){s='array'}}else{s='null'}}return s}function isEmpty(o){var i,v;if(typeOf(o)==='object'){for(i in o){v=o[i];if(v!==undefined&&typeOf(v)!=='function'){return false}}}return true}if(!String.prototype.entityify){String.prototype.entityify=function(){return this.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}}if(!String.prototype.quote){String.prototype.quote=function(){var c,i,l=this.length,o='"';for(i=0;i<l;i+=1){c=this.charAt(i);if(c>=' '){if(c==='\\'||c==='"'){o+='\\'}o+=c}else{switch(c){case'\b':o+='\\b';break;case'\f':o+='\\f';break;case'\n':o+='\\n';break;case'\r':o+='\\r';break;case'\t':o+='\\t';break;default:c=c.charCodeAt();o+='\\u00'+Math.floor(c/16).toString(16)+(c%16).toString(16)}}}return o+'"'}}if(!String.prototype.supplant){String.prototype.supplant=function(o){return this.replace(/{([^{}]*)}/g,function(a,b){var r=o[b];return typeof r==='string'||typeof r==='number'?r:a})}}if(!String.prototype.trim){String.prototype.trim=function(){return this.replace(/^\s*(\S*(?:\s+\S+)*)\s*$/,"$1")}}if(!String.prototype.camelize){String.prototype.camelize=function camelize(){var d=this.replace(/([\s|\-|\_|\n])([^\s|\-|\_|\n]?)/g,function(a,b,c){return(c)?c.toUpperCase():''});var e=d.charAt(0),lower=e.toLowerCase();return(e!==lower)?(lower+d.slice(1)):d}}if(!String.prototype.trim){String.prototype.trim=function trim(){return this.replace(/^\s+|\s+$/g,"")}}if(!String.prototype.fmt){String.prototype.fmt=function fmt(){var b=arguments;var c=0;return this.replace(/%@([0-9]+)?/g,function(s,a){a=(a)?parseInt(a,0)-1:c++;s=b[a];return((s===null)?'(null)':(s===undefined)?'':s).toString()})}}if(!Array.prototype.uniq){Array.prototype.uniq=function uniq(){var a=[],len=this.length,item,idx;for(idx=0;idx<len;idx++){item=this[idx];if(a.indexOf(item)<0)a.push(item)}return a}}if(!String.prototype.w){String.prototype.w=function w(){var a=[],ary2=this.split(' '),len=ary2.length;for(var b=0;b<len;++b){var c=ary2[b];if(c.length!==0)a.push(c)}return a}}if(!String.prototype.truncate){String.prototype.truncate=function truncate(l){return this.slice(0,l)}}